"use strict";var range,DOCUMENT_FRAGMENT_NODE=11;function morphAttrs(e,t){var n,r,o,i,a,u=t.attributes;if(t.nodeType!==DOCUMENT_FRAGMENT_NODE&&e.nodeType!==DOCUMENT_FRAGMENT_NODE){for(var l=u.length-1;l>=0;l--)r=(n=u[l]).name,o=n.namespaceURI,i=n.value,o?(r=n.localName||r,(a=e.getAttributeNS(o,r))!==i&&("xmlns"===n.prefix&&(r=n.name),e.setAttributeNS(o,r,i))):(a=e.getAttribute(r))!==i&&e.setAttribute(r,i);for(var c=e.attributes,s=c.length-1;s>=0;s--)r=(n=c[s]).name,(o=n.namespaceURI)?(r=n.localName||r,t.hasAttributeNS(o,r)||e.removeAttributeNS(o,r)):t.hasAttribute(r)||e.removeAttribute(r)}}var NS_XHTML="http://www.w3.org/1999/xhtml",doc="undefined"==typeof document?void 0:document,HAS_TEMPLATE_SUPPORT=!!doc&&"content"in doc.createElement("template"),HAS_RANGE_SUPPORT=!!doc&&doc.createRange&&"createContextualFragment"in doc.createRange();function createFragmentFromTemplate(e){var t=doc.createElement("template");return t.innerHTML=e,t.content.childNodes[0]}function createFragmentFromRange(e){return range||(range=doc.createRange()).selectNode(doc.body),range.createContextualFragment(e).childNodes[0]}function createFragmentFromWrap(e){var t=doc.createElement("body");return t.innerHTML=e,t.childNodes[0]}function toElement(e){return(e=e.trim(),HAS_TEMPLATE_SUPPORT)?createFragmentFromTemplate(e):HAS_RANGE_SUPPORT?createFragmentFromRange(e):createFragmentFromWrap(e)}function compareNodeNames(e,t){var n,r,o=e.nodeName,i=t.nodeName;return o===i||((n=o.charCodeAt(0),r=i.charCodeAt(0),n<=90&&r>=97)?o===i.toUpperCase():r<=90&&n>=97&&i===o.toUpperCase())}function createElementNS(e,t){return t&&t!==NS_XHTML?doc.createElementNS(t,e):doc.createElement(e)}function moveChildren(e,t){for(var n=e.firstChild;n;){var r=n.nextSibling;t.appendChild(n),n=r}return t}function syncBooleanAttrProp(e,t,n){e[n]!==t[n]&&(e[n]=t[n],e[n]?e.setAttribute(n,""):e.removeAttribute(n))}var specialElHandlers={OPTION:function(e,t){var n=e.parentNode;if(n){var r=n.nodeName.toUpperCase();"OPTGROUP"===r&&(r=(n=n.parentNode)&&n.nodeName.toUpperCase()),"SELECT"!==r||n.hasAttribute("multiple")||(e.hasAttribute("selected")&&!t.selected&&(e.setAttribute("selected","selected"),e.removeAttribute("selected")),n.selectedIndex=-1)}syncBooleanAttrProp(e,t,"selected")},INPUT:function(e,t){syncBooleanAttrProp(e,t,"checked"),syncBooleanAttrProp(e,t,"disabled"),e.value!==t.value&&(e.value=t.value),t.hasAttribute("value")||e.removeAttribute("value")},TEXTAREA:function(e,t){var n=t.value;e.value!==n&&(e.value=n);var r=e.firstChild;if(r){var o=r.nodeValue;if(o==n||!n&&o==e.placeholder)return;r.nodeValue=n}},SELECT:function(e,t){if(!t.hasAttribute("multiple")){for(var n,r,o=-1,i=0,a=e.firstChild;a;)if("OPTGROUP"===(r=a.nodeName&&a.nodeName.toUpperCase()))a=(n=a).firstChild;else{if("OPTION"===r){if(a.hasAttribute("selected")){o=i;break}i++}(a=a.nextSibling)||!n||(a=n.nextSibling,n=null)}e.selectedIndex=o}}},ELEMENT_NODE=1,DOCUMENT_FRAGMENT_NODE$1=11,TEXT_NODE=3,COMMENT_NODE=8;function noop(){}function defaultGetNodeKey(e){if(e)return e.getAttribute&&e.getAttribute("id")||e.id}function morphdomFactory(e){return function t(n,r,o){if(o||(o={}),"string"==typeof r){if("#document"===n.nodeName||"HTML"===n.nodeName||"BODY"===n.nodeName){var i=r;(r=doc.createElement("html")).innerHTML=i}else r=toElement(r)}else r.nodeType===DOCUMENT_FRAGMENT_NODE$1&&(r=r.firstElementChild);var a=o.getNodeKey||defaultGetNodeKey,u=o.onBeforeNodeAdded||noop,l=o.onNodeAdded||noop,c=o.onBeforeElUpdated||noop,s=o.onElUpdated||noop,d=o.onBeforeNodeDiscarded||noop,m=o.onNodeDiscarded||noop,p=o.onBeforeElChildrenUpdated||noop,f=o.skipFromChildren||noop,g=o.addChild||function(e,t){return e.appendChild(t)},h=!0===o.childrenOnly,N=Object.create(null),E=[];function y(e){E.push(e)}function T(e,t,n){!1!==d(e)&&(t&&t.removeChild(e),m(e),function e(t,n){if(t.nodeType===ELEMENT_NODE)for(var r=t.firstChild;r;){var o=void 0;n&&(o=a(r))?y(o):(m(r),r.firstChild&&e(r,n)),r=r.nextSibling}}(e,n))}function v(e){l(e);for(var t=e.firstChild;t;){var n=t.nextSibling,r=a(t);if(r){var o=N[r];o&&compareNodeNames(t,o)?(t.parentNode.replaceChild(o,t),A(o,t)):v(t)}else v(t);t=n}}function A(t,n,r){var o=a(n);if(o&&delete N[o],r||!1!==c(t,n)&&(e(t,n),s(t),!1!==p(t,n)))"TEXTAREA"!==t.nodeName?function e(t,n){var r,o,i,l,c,s=f(t,n),d=n.firstChild,m=t.firstChild;outer:for(;d;){for(l=d.nextSibling,r=a(d);!s&&m;){if(i=m.nextSibling,d.isSameNode&&d.isSameNode(m)){d=l,m=i;continue outer}o=a(m);var p=m.nodeType,h=void 0;if(p===d.nodeType&&(p===ELEMENT_NODE?(r?r!==o&&((c=N[r])?i===c?h=!1:(t.insertBefore(c,m),o?y(o):T(m,t,!0),o=a(m=c)):h=!1):o&&(h=!1),(h=!1!==h&&compareNodeNames(m,d))&&A(m,d)):(p===TEXT_NODE||p==COMMENT_NODE)&&(h=!0,m.nodeValue!==d.nodeValue&&(m.nodeValue=d.nodeValue))),h){d=l,m=i;continue outer}o?y(o):T(m,t,!0),m=i}if(r&&(c=N[r])&&compareNodeNames(c,d))s||g(t,c),A(c,d);else{var E=u(d);!1!==E&&(E&&(d=E),d.actualize&&(d=d.actualize(t.ownerDocument||doc)),g(t,d),v(d))}d=l,m=i}!function e(t,n,r){for(;n;){var o=n.nextSibling;(r=a(n))?y(r):T(n,t,!0),n=o}}(t,m,o);var C=specialElHandlers[t.nodeName];C&&C(t,n)}(t,n):specialElHandlers.TEXTAREA(t,n)}!function e(t){if(t.nodeType===ELEMENT_NODE||t.nodeType===DOCUMENT_FRAGMENT_NODE$1)for(var n=t.firstChild;n;){var r=a(n);r&&(N[r]=n),e(n),n=n.nextSibling}}(n);var C=n,S=C.nodeType,M=r.nodeType;if(!h){if(S===ELEMENT_NODE)M===ELEMENT_NODE?compareNodeNames(n,r)||(m(n),C=moveChildren(n,createElementNS(r.nodeName,r.namespaceURI))):C=r;else if(S===TEXT_NODE||S===COMMENT_NODE){if(M===S)return C.nodeValue!==r.nodeValue&&(C.nodeValue=r.nodeValue),C;C=r}}if(C===r)m(n);else{if(r.isSameNode&&r.isSameNode(C))return;if(A(C,r,h),E)for(var b=0,$=E.length;b<$;b++){var O=N[E[b]];O&&T(O,O.parentNode,!1)}}return!h&&C!==n&&n.parentNode&&(C.actualize&&(C=C.actualize(n.ownerDocument||doc)),n.parentNode.replaceChild(C,n)),C}}var morphdom=morphdomFactory(morphAttrs);export class Application{constructor(){this._componentDefinitions=[],this._morphdomOptions={onBeforeElUpdated:function(e,t){return!e.isEqualNode(t)}},this._eventNames=["click","dblclick","mousedown","mouseup","mousemove","mouseenter","mouseleave","mouseover","mouseout","keydown","keypress","keyup","focus","blur","input","change","submit","scroll","error","resize","select","touchstart","touchmove","touchend","touchcancel","animationstart","animationend","animationiteration","transitionstart","transitionend","transitioncancel"]}static launch(e){let t=this._getInstance();for(let n of e)t._componentDefinitions.push({name:Application._getComponentName(n),class:n});t._updateElement(document.documentElement)}static update(e){Application._throwIfUninitialized(),e.element.component===e&&Application._getInstance()._updateComponent(e)}static getComponentById(e){var t;return Application._throwIfUninitialized(),null!==(t=document.getElementById(e).component)&&void 0!==t?t:null}static getComponentByClass(e){var t;Application._throwIfUninitialized();let n=Application._getComponentName(e),r=document.querySelector(n);return r&&null!==(t=r.component)&&void 0!==t?t:null}static getComponentsByClass(e){Application._throwIfUninitialized();let t=Application._getComponentName(e),n=Array.from(document.querySelectorAll(t)),r=[];for(let o of n)o.component&&r.push(o.component);return r}static _getInstance(){var e;return null!==(e=Application._instance)&&void 0!==e?e:Application._instance=new Application}static _getComponentName(e){let t=e.name,n="";for(let r=0;r<t.length;r++)r>0&&t[r]===t[r].toUpperCase()&&(n+="-"),n+=t[r].toLowerCase();return n}static _throwIfUninitialized(){if(null===Application._instance)throw Error("Application has not been launched")}_updateElement(e){for(let t of this._componentDefinitions)for(let n of Array.from(e.querySelectorAll(t.name))){if(n.component)continue;if(!n.id||document.querySelectorAll(`#${n.id}`).length>1)throw Error("Components must have an unique id");n.style.display="contents";let r=document.getElementById(n.id),o;r&&r.component?o=r.component:(o=new t.class(n),this._registerEventListeners(o),n.component=o,o.onInit()),n.innerHTML=o.render(),this._updateElement(n)}}_registerEventListeners(e){for(let t of e.getKeys()){let n=t.substring(2).toLowerCase();-1!==this._eventNames.indexOf(n)&&e.element.addEventListener(n,n=>{e[t](n)})}}_updateComponent(e){let t=e.element.cloneNode(!1);t.innerHTML=e.render(),this._updateElement(t),morphdom(e.element,t,this._morphdomOptions)}}Application._instance=null;export class Component{constructor(e){this._element=e}get id(){return this._element.id}get element(){return this._element}getAttribute(e,t=null){let n=this._element.attributes.getNamedItem(e);return n?n.value:t}update(e){for(let t of this.getKeys())this[t]===e&&(this[t]=e)}getKeys(){let e=[],t=this;for(;t;){let n=Object.getPrototypeOf(t);n&&Object.getPrototypeOf(n)&&(e=e.concat(Object.getOwnPropertyNames(t))),t=n}return[...new Set(e)]}getComponentById(e){return Application.getComponentById(e)}getComponentByClass(e){return Application.getComponentByClass(e)}getComponentsByClass(e){return Application.getComponentsByClass(e)}onInit(){}onClick(e){}onDblClick(e){}onMouseDown(e){}onMouseUp(e){}onMouseMove(e){}onMouseEnter(e){}onMouseLeave(e){}onMouseOver(e){}onMouseOut(e){}onKeyDown(e){}onKeyPress(e){}onKeyUp(e){}onFocus(e){}onBlur(e){}onInput(e){}onChange(e){}onSubmit(e){}onScroll(e){}onError(e){}onResize(e){}onSelect(e){}onTouchStart(e){}onTouchMove(e){}onTouchEnd(e){}onTouchCancel(e){}onAnimationStart(e){}onAnimationEnd(e){}onAnimationIteration(e){}onTransitionStart(e){}onTransitionEnd(e){}onTransitionCancel(e){}}export class Debounce{constructor(e,t){this._timeoutId=null,this._callback=(...n)=>{window.clearTimeout(this._timeoutId),this._timeoutId=window.setTimeout(()=>{e.apply(null,n)},t)}}call(...e){this._callback.apply(this,e)}}export var Format;!function(e){e.date=function e(t,n){let r;t instanceof Date?r=t:"today"===t||Validation.isNumber(t)||Validation.isNullOrUndefinedOrEmpty(t)?r=new Date:"tomorrow"===t?(r=new Date).setDate(r.getDate()+1):"yesterday"===t?(r=new Date).setDate(r.getDate()-1):r=new Date(t);let o=["January","February","March","April","May","June","July","August","September","October","November","December"],i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return n.replace(/(d{1,4}|m{1,4}|y{2,4}|h{1,2}|H{1,2}|M{1,2}|s{1,2}|l|L|t{1,2}|T{1,2}'[^']*'|"[^"]*")/g,function(e){switch(e){case"d":return r.getDate().toString();case"dd":return r.getDate().toString().padStart(2,"0");case"ddd":return i[r.getDay()].slice(0,3);case"dddd":return i[r.getDay()];case"m":return(r.getMonth()+1).toString();case"mm":return String(r.getMonth()+1).padStart(2,"0");case"mmm":return o[r.getMonth()].slice(0,3);case"mmmm":return o[r.getMonth()];case"yy":return String(r.getFullYear()).slice(-2);case"yyyy":return r.getFullYear().toString();case"h":return(r.getHours()%12||12).toString();case"hh":return String(r.getHours()%12||12).padStart(2,"0");case"H":return r.getHours().toString();case"HH":return String(r.getHours()).padStart(2,"0");case"M":return r.getMinutes().toString();case"MM":return String(r.getMinutes()).padStart(2,"0");case"s":return r.getSeconds().toString();case"ss":return String(r.getSeconds()).padStart(2,"0");case"l":return String(r.getMilliseconds()).padStart(3,"0");case"L":return String(r.getMilliseconds()).padStart(3,"0").substring(0,2);case"t":return 12>r.getHours()?"a":"p";case"tt":return 12>r.getHours()?"am":"pm";case"T":return 12>r.getHours()?"A":"P";case"TT":return 12>r.getHours()?"AM":"PM";default:return e.slice(1,-1)}})},e.titleCase=function e(t){let n=String(t).trim();return n.charAt(0).toUpperCase()+n.slice(1)},e.upperCase=function e(t){let n=String(t).trim();return n.toUpperCase()},e.lowerCase=function e(t){let n=String(t).trim();return n.toLowerCase()},e.percentage=function e(t,n){let r=Number(t);return r.toFixed(n)+"%"},e.decimal=function e(t,n){let r=Number(t);return r.toFixed(n)},e.currency=function e(t,n="USD"){return t.toLocaleString(void 0,{style:"currency",currency:n})}}(Format||(Format={}));export class LocalStorage{static getItem(e){let t=localStorage.getItem(e);if(!t)return null;let n=JSON.parse(t);return void 0!==n.expiry&&n.expiry<new Date().getTime()?(localStorage.removeItem(e),null):n.value}static setItem(e,t,n){let r={value:t,expiry:void 0!==n?new Date().getTime()+n:void 0};localStorage.setItem(e,JSON.stringify(r))}}export function State(e,t){let n=e[t],r=function(){return n},o=function(e){n=e,this instanceof Component&&Application.update(this)};Object.defineProperty(e,t,{get:r,set:o,enumerable:!0,configurable:!0})}export var Validation;!function(e){function t(e,t){return e===t}function n(e,t){return e!==t}function r(e,t){return e>=t}function o(e,t){return e<=t}e.equals=t,e.notEquals=n,e.email=function e(t){return!!t.match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)},e.phoneNumber=function e(t){return!!t.match(/^[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}$/im)},e.date=function e(t,n){return t.getTime()===n.getTime()},e.dateMin=function e(t,n){return t.getTime()>=n.getTime()},e.dateMax=function e(t,n){return t.getTime()<=n.getTime()},e.dateRange=function e(t,n,r){return t.getTime()>=n.getTime()&&t.getTime()<=r.getTime()},e.positiveInteger=function e(t){return!!t.match(/^\d+$/)},e.negativeInteger=function e(t){return!!t.match(/^-\d+$/)},e.integer=function e(t){return!!t.match(/^(-?\d+)$/)},e.positiveNumeric=function e(t){return!!t.match(/^\d+(\.\d+)?$/)},e.negativeNumeric=function e(t){return!!t.match(/^-\d+(\.\d+)?$/)},e.numeric=function e(t){return!!t.match(/^(-?\d+(\.\d+)?)$/)},e.numberMin=r,e.numberMax=o,e.numberRange=function e(t,n,r){return t>=n&&t<=r},e.isString=function e(t){return"string"==typeof t},e.isNumber=function e(t){return"number"==typeof t},e.notNaN=function e(t){return!isNaN(t)},e.isNan=function e(t){return isNaN(t)},e.notInfinity=function e(t){return t!==1/0&&t!==-1/0},e.isInfinity=function e(t){return t===1/0||t===-1/0},e.regex=function e(t,n){return n.test(t)},e.length=function e(t,n){return t.length===n},e.lengthMin=function e(t,n){return t.length>=n},e.lengthMax=function e(t,n){return t.length<=n},e.lengthRange=function e(t,n,r){return t.length>=n&&t.length<=r},e.isEmpty=function e(t){return 0===t.length},e.notEmpty=function e(t){return t.length>0},e.isNull=function e(t){return null===t},e.notNull=function e(t){return null!==t},e.isUndefined=function e(t){return void 0===t},e.notUndefined=function e(t){return void 0!==t},e.notNullOrUndefined=function e(t){return null!=t},e.isNullOrUndefined=function e(t){return null==t},e.notNullOrUndefinedOrEmpty=function e(t){return null!=t&&t.length>0},e.isNullOrUndefinedOrEmpty=function e(t){return null==t||t.length<=0}}(Validation||(Validation={}));