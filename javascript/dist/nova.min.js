String.prototype.html=function(){return new Html(this)},Date.prototype.format=formatDate;var range,DOCUMENT_FRAGMENT_NODE=11;function morphAttrs(e,t){var n,r,o,a,i,s=t.attributes;if(t.nodeType!==DOCUMENT_FRAGMENT_NODE&&e.nodeType!==DOCUMENT_FRAGMENT_NODE){for(var l=s.length-1;l>=0;l--)r=(n=s[l]).name,o=n.namespaceURI,a=n.value,o?(r=n.localName||r,(i=e.getAttributeNS(o,r))!==a&&("xmlns"===n.prefix&&(r=n.name),e.setAttributeNS(o,r,a))):(i=e.getAttribute(r))!==a&&e.setAttribute(r,a);for(var u=e.attributes,d=u.length-1;d>=0;d--)r=(n=u[d]).name,(o=n.namespaceURI)?(r=n.localName||r,t.hasAttributeNS(o,r)||e.removeAttributeNS(o,r)):t.hasAttribute(r)||e.removeAttribute(r)}}var NS_XHTML="http://www.w3.org/1999/xhtml",doc="undefined"==typeof document?void 0:document,HAS_TEMPLATE_SUPPORT=!!doc&&"content"in doc.createElement("template"),HAS_RANGE_SUPPORT=!!doc&&doc.createRange&&"createContextualFragment"in doc.createRange();function createFragmentFromTemplate(e){var t=doc.createElement("template");return t.innerHTML=e,t.content.childNodes[0]}function createFragmentFromRange(e){return range||(range=doc.createRange()).selectNode(doc.body),range.createContextualFragment(e).childNodes[0]}function createFragmentFromWrap(e){var t=doc.createElement("body");return t.innerHTML=e,t.childNodes[0]}function toElement(e){return(e=e.trim(),HAS_TEMPLATE_SUPPORT)?createFragmentFromTemplate(e):HAS_RANGE_SUPPORT?createFragmentFromRange(e):createFragmentFromWrap(e)}function compareNodeNames(e,t){var n,r,o=e.nodeName,a=t.nodeName;return o===a||((n=o.charCodeAt(0),r=a.charCodeAt(0),n<=90&&r>=97)?o===a.toUpperCase():r<=90&&n>=97&&a===o.toUpperCase())}function createElementNS(e,t){return t&&t!==NS_XHTML?doc.createElementNS(t,e):doc.createElement(e)}function moveChildren(e,t){for(var n=e.firstChild;n;){var r=n.nextSibling;t.appendChild(n),n=r}return t}function syncBooleanAttrProp(e,t,n){e[n]!==t[n]&&(e[n]=t[n],e[n]?e.setAttribute(n,""):e.removeAttribute(n))}var specialElHandlers={OPTION:function(e,t){var n=e.parentNode;if(n){var r=n.nodeName.toUpperCase();"OPTGROUP"===r&&(r=(n=n.parentNode)&&n.nodeName.toUpperCase()),"SELECT"!==r||n.hasAttribute("multiple")||(e.hasAttribute("selected")&&!t.selected&&(e.setAttribute("selected","selected"),e.removeAttribute("selected")),n.selectedIndex=-1)}syncBooleanAttrProp(e,t,"selected")},INPUT:function(e,t){syncBooleanAttrProp(e,t,"checked"),syncBooleanAttrProp(e,t,"disabled"),e.value!==t.value&&(e.value=t.value),t.hasAttribute("value")||e.removeAttribute("value")},TEXTAREA:function(e,t){var n=t.value;e.value!==n&&(e.value=n);var r=e.firstChild;if(r){var o=r.nodeValue;if(o==n||!n&&o==e.placeholder)return;r.nodeValue=n}},SELECT:function(e,t){if(!t.hasAttribute("multiple")){for(var n,r,o=-1,a=0,i=e.firstChild;i;)if("OPTGROUP"===(r=i.nodeName&&i.nodeName.toUpperCase()))i=(n=i).firstChild;else{if("OPTION"===r){if(i.hasAttribute("selected")){o=a;break}a++}(i=i.nextSibling)||!n||(i=n.nextSibling,n=null)}e.selectedIndex=o}}},ELEMENT_NODE=1,DOCUMENT_FRAGMENT_NODE$1=11,TEXT_NODE=3,COMMENT_NODE=8;function noop(){}function defaultGetNodeKey(e){if(e)return e.getAttribute&&e.getAttribute("id")||e.id}function morphdomFactory(e){return function t(n,r,o){if(o||(o={}),"string"==typeof r){if("#document"===n.nodeName||"HTML"===n.nodeName||"BODY"===n.nodeName){var a=r;(r=doc.createElement("html")).innerHTML=a}else r=toElement(r)}else r.nodeType===DOCUMENT_FRAGMENT_NODE$1&&(r=r.firstElementChild);var i=o.getNodeKey||defaultGetNodeKey,s=o.onBeforeNodeAdded||noop,l=o.onNodeAdded||noop,u=o.onBeforeElUpdated||noop,d=o.onElUpdated||noop,p=o.onBeforeNodeDiscarded||noop,c=o.onNodeDiscarded||noop,m=o.onBeforeElChildrenUpdated||noop,h=o.skipFromChildren||noop,f=o.addChild||function(e,t){return e.appendChild(t)},g=!0===o.childrenOnly,E=Object.create(null),N=[];function v(e){N.push(e)}function b(e,t,n){!1!==p(e)&&(t&&t.removeChild(e),c(e),function e(t,n){if(t.nodeType===ELEMENT_NODE)for(var r=t.firstChild;r;){var o=void 0;n&&(o=i(r))?v(o):(c(r),r.firstChild&&e(r,n)),r=r.nextSibling}}(e,n))}function C(e){l(e);for(var t=e.firstChild;t;){var n=t.nextSibling,r=i(t);if(r){var o=E[r];o&&compareNodeNames(t,o)?(t.parentNode.replaceChild(o,t),y(o,t)):C(t)}else C(t);t=n}}function y(t,n,r){var o=i(n);if(o&&delete E[o],r||!1!==u(t,n)&&(e(t,n),d(t),!1!==m(t,n)))"TEXTAREA"!==t.nodeName?function e(t,n){var r,o,a,l,u,d=h(t,n),p=n.firstChild,c=t.firstChild;outer:for(;p;){for(l=p.nextSibling,r=i(p);!d&&c;){if(a=c.nextSibling,p.isSameNode&&p.isSameNode(c)){p=l,c=a;continue outer}o=i(c);var m=c.nodeType,g=void 0;if(m===p.nodeType&&(m===ELEMENT_NODE?(r?r!==o&&((u=E[r])?a===u?g=!1:(t.insertBefore(u,c),o?v(o):b(c,t,!0),o=i(c=u)):g=!1):o&&(g=!1),(g=!1!==g&&compareNodeNames(c,p))&&y(c,p)):(m===TEXT_NODE||m==COMMENT_NODE)&&(g=!0,c.nodeValue!==p.nodeValue&&(c.nodeValue=p.nodeValue))),g){p=l,c=a;continue outer}o?v(o):b(c,t,!0),c=a}if(r&&(u=E[r])&&compareNodeNames(u,p))d||f(t,u),y(u,p);else{var N=s(p);!1!==N&&(N&&(p=N),p.actualize&&(p=p.actualize(t.ownerDocument||doc)),f(t,p),C(p))}p=l,c=a}!function e(t,n,r){for(;n;){var o=n.nextSibling;(r=i(n))?v(r):b(n,t,!0),n=o}}(t,c,o);var T=specialElHandlers[t.nodeName];T&&T(t,n)}(t,n):specialElHandlers.TEXTAREA(t,n)}!function e(t){if(t.nodeType===ELEMENT_NODE||t.nodeType===DOCUMENT_FRAGMENT_NODE$1)for(var n=t.firstChild;n;){var r=i(n);r&&(E[r]=n),e(n),n=n.nextSibling}}(n);var T=n,A=T.nodeType,$=r.nodeType;if(!g){if(A===ELEMENT_NODE)$===ELEMENT_NODE?compareNodeNames(n,r)||(c(n),T=moveChildren(n,createElementNS(r.nodeName,r.namespaceURI))):T=r;else if(A===TEXT_NODE||A===COMMENT_NODE){if($===A)return T.nodeValue!==r.nodeValue&&(T.nodeValue=r.nodeValue),T;T=r}}if(T===r)c(n);else{if(r.isSameNode&&r.isSameNode(T))return;if(y(T,r,g),N)for(var S=0,_=N.length;S<_;S++){var M=E[N[S]];M&&b(M,M.parentNode,!1)}}return!g&&T!==n&&n.parentNode&&(T.actualize&&(T=T.actualize(n.ownerDocument||doc)),n.parentNode.replaceChild(T,n)),T}}var morphdom=morphdomFactory(morphAttrs);export class Application{constructor(){let e=this;this._morphdomOptions={onBeforeElUpdated:function(t,n){return e._onBeforeElementUpdated(t,n)}}}static launch(e){if(null!==this._instance)throw Error("Application has already been launched");let t=this._getInstance();t._initializeComponents([...new Set(e)])}static updateComponent(e){this._throwIfUninitialized(),this._getInstance()._updateComponent(e)}static queryComponent(e,t=document.documentElement){var n;return this._throwIfUninitialized(),(null===(n=t.querySelector(e))||void 0===n?void 0:n.appComponent)||null}static queryComponents(e,t=document.documentElement){this._throwIfUninitialized();let n=[];for(let r of Array.from(t.querySelectorAll(e))){let o=r.appComponent;o&&n.push(o)}return n}static _getInstance(){var e;return null!==(e=this._instance)&&void 0!==e?e:this._instance=new Application}static _throwIfUninitialized(){if(null===this._instance)throw Error("Application has not been launched")}_updateComponent(e){let t=e.element.cloneNode(!1);if(e.getKeys().includes("render"))for(let n of(morphdom(e.element,t,this._morphdomOptions),Application.queryComponents("*",e.element.parentElement)))n.element.appComponentDirty&&(n.element.appComponentDirty=!1,n.onUpdate())}_onBeforeElementUpdated(e,t){let n=e.appComponent;if(!n)return!e.isEqualNode(t);let r=n.render();if(r instanceof Html){if(t.innerHTML="",t.style.display="contents",e.appComponentEvents){for(let[o,a]of e.appComponentEvents)e.removeEventListener(o,a);e.appComponentEvents=[]}return t.appendChild(r.build(e)),n.onMorph(t),!e.isEqualNode(t)&&(e.appComponentDirty=!0,!0)}}_initializeComponents(e){for(let t of e)this._initializeComponent(t)}_initializeComponent(e){let t=this;class n extends HTMLElement{connectedCallback(){this.appComponent=new e.ctor(this),t._observeAttributes(this.appComponent),(async()=>{await this.appComponent.onInit(),t._updateComponent(this.appComponent),this.appComponent.onAppear()})()}disconnectedCallback(){this.appComponent.onDestroy()}}customElements.define(e.tag,n)}_observeAttributes(e){if(!e.getKeys().includes("onAttributeChanged"))return;let t=new MutationObserver((t,n)=>{for(let r of t)"attributes"===r.type&&e.onAttributeChanged(r.attributeName,r.oldValue,e.element.getAttribute(r.attributeName))});t.observe(e.element,{attributes:!0,attributeOldValue:!0,subtree:!1})}}Application._instance=null;export class Component{constructor(e){this.element=e}render(){}onInit(){}onAppear(){}onUpdate(){}onDestroy(){}onMorph(e){}onAttributeChanged(e,t,n){}update(e){for(let t of this.getKeys())this[t]===e&&(this[t]=e)}queryComponent(e,t){return Application.queryComponent(e,t)}queryComponents(e,t){return Application.queryComponents(e,t)}getKeys(){let e=[],t=this;for(;t;){let n=Object.getPrototypeOf(t);n&&Object.getPrototypeOf(n)&&(e=e.concat(Object.getOwnPropertyNames(t))),t=n}return[...new Set(e)]}}export class Debounce{constructor(e,t){this._timeoutId=null,this._callback=(...n)=>{window.clearTimeout(this._timeoutId),this._timeoutId=window.setTimeout(()=>{e.apply(null,n)},t)}}call(...e){this._callback.apply(this,e)}}function formatDate(e){let t=this,n=["January","February","March","April","May","June","July","August","September","October","November","December"],r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return e.replace(/(d{1,4}|m{1,4}|y{2,4}|h{1,2}|H{1,2}|M{1,2}|s{1,2}|l|L|t{1,2}|T{1,2}'[^']*'|"[^"]*")/g,function(e){switch(e){case"d":return t.getDate().toString();case"dd":return t.getDate().toString().padStart(2,"0");case"ddd":return r[t.getDay()].slice(0,3);case"dddd":return r[t.getDay()];case"m":return(t.getMonth()+1).toString();case"mm":return String(t.getMonth()+1).padStart(2,"0");case"mmm":return n[t.getMonth()].slice(0,3);case"mmmm":return n[t.getMonth()];case"yy":return String(t.getFullYear()).slice(-2);case"yyyy":return t.getFullYear().toString();case"h":return(t.getHours()%12||12).toString();case"hh":return String(t.getHours()%12||12).padStart(2,"0");case"H":return t.getHours().toString();case"HH":return String(t.getHours()).padStart(2,"0");case"M":return t.getMinutes().toString();case"MM":return String(t.getMinutes()).padStart(2,"0");case"s":return t.getSeconds().toString();case"ss":return String(t.getSeconds()).padStart(2,"0");case"l":return String(t.getMilliseconds()).padStart(3,"0");case"L":return String(t.getMilliseconds()).padStart(3,"0").substring(0,2);case"t":return 12>t.getHours()?"a":"p";case"tt":return 12>t.getHours()?"am":"pm";case"T":return 12>t.getHours()?"A":"P";case"TT":return 12>t.getHours()?"AM":"PM";default:return e.slice(1,-1)}})}export class Html{constructor(e){this._attributes=[],this._children=[],this._events=[],this._text="",this._tag=e}attribute(e,t){return this._attributes.push([e,t]),this}attributes(...e){for(let[t,n]of e)this._attributes.push([t,n]);return this}attributeIf(e,t,n){return this.if(e,e=>e.attribute(t,n))}class(e){return this.attribute("class",e),this}id(e){return this.attribute("id",e),this}style(e){return this.attribute("style",e),this}text(e){return this._text=e,this}on(e,t){return this._events.push([e,t]),this}if(e,t){return e&&t(this),this}append(...e){for(let t of e)t!==this&&this._children.push(t);return this}appendIf(e,...t){return this.if(e,()=>this.append(...t))}forRange(e,t,n){for(let r=e;r<t;r++)n(this,r);return this}appendForRange(e,t,n){return this.forRange(e,t,(e,t)=>e.append(n(t)))}forEach(e,t){for(let n of e)t(this,n);return this}appendForEach(e,t){return this.forEach(e,(e,n)=>e.append(t(n)))}build(e){let t=document.createElement(this._tag),n="app-component-event";for(let[r,o]of this._attributes)t.setAttribute(r,o);for(let a of(this._text&&(t.innerText=this._text),this._children))t.appendChild(a.build(e));for(let[i,s]of(this._events.length>0&&t.setAttribute(n,"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(+e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>+e/4).toString(16))),this._events)){let l=e=>{let r=e.target;if(r.closest(`[${n}="${t.getAttribute(n)}"]`))return s(e)};e.addEventListener(i,l),e.appComponentEvents||(e.appComponentEvents=[]),e.appComponentEvents.push([i,l])}return t}}export var LocalStorage;!function(e){e.getItem=function e(t){let n=localStorage.getItem(t);if(!n)return null;let r=JSON.parse(n);return void 0!==r.expiry&&r.expiry<new Date().getTime()?(localStorage.removeItem(t),null):r.value},e.setItem=function e(t,n,r){let o={value:n,expiry:void 0!==r?new Date().getTime()+r:void 0};localStorage.setItem(t,JSON.stringify(o))}}(LocalStorage||(LocalStorage={}));export function State(e,t){let n=Symbol(t);Object.defineProperty(e,n,{writable:!0,enumerable:!1,configurable:!0});let r=function(){return this[n]},o=function(e){this[n]=e,this instanceof Component&&Application.updateComponent(this)};Object.defineProperty(e,t,{get:r,set:o,enumerable:!0,configurable:!0})}