"use strict";var range,DOCUMENT_FRAGMENT_NODE=11;function morphAttrs(e,t){var n,o,r,a,i,l=t.attributes;if(t.nodeType!==DOCUMENT_FRAGMENT_NODE&&e.nodeType!==DOCUMENT_FRAGMENT_NODE){for(var c=l.length-1;c>=0;c--)o=(n=l[c]).name,r=n.namespaceURI,a=n.value,r?(o=n.localName||o,(i=e.getAttributeNS(r,o))!==a&&("xmlns"===n.prefix&&(o=n.name),e.setAttributeNS(r,o,a))):(i=e.getAttribute(o))!==a&&e.setAttribute(o,a);for(var s=e.attributes,d=s.length-1;d>=0;d--)o=(n=s[d]).name,(r=n.namespaceURI)?(o=n.localName||o,t.hasAttributeNS(r,o)||e.removeAttributeNS(r,o)):t.hasAttribute(o)||e.removeAttribute(o)}}var NS_XHTML="http://www.w3.org/1999/xhtml",doc="undefined"==typeof document?void 0:document,HAS_TEMPLATE_SUPPORT=!!doc&&"content"in doc.createElement("template"),HAS_RANGE_SUPPORT=!!doc&&doc.createRange&&"createContextualFragment"in doc.createRange();function createFragmentFromTemplate(e){var t=doc.createElement("template");return t.innerHTML=e,t.content.childNodes[0]}function createFragmentFromRange(e){return range||(range=doc.createRange()).selectNode(doc.body),range.createContextualFragment(e).childNodes[0]}function createFragmentFromWrap(e){var t=doc.createElement("body");return t.innerHTML=e,t.childNodes[0]}function toElement(e){return(e=e.trim(),HAS_TEMPLATE_SUPPORT)?createFragmentFromTemplate(e):HAS_RANGE_SUPPORT?createFragmentFromRange(e):createFragmentFromWrap(e)}function compareNodeNames(e,t){var n,o,r=e.nodeName,a=t.nodeName;return r===a||((n=r.charCodeAt(0),o=a.charCodeAt(0),n<=90&&o>=97)?r===a.toUpperCase():o<=90&&n>=97&&a===r.toUpperCase())}function createElementNS(e,t){return t&&t!==NS_XHTML?doc.createElementNS(t,e):doc.createElement(e)}function moveChildren(e,t){for(var n=e.firstChild;n;){var o=n.nextSibling;t.appendChild(n),n=o}return t}function syncBooleanAttrProp(e,t,n){e[n]!==t[n]&&(e[n]=t[n],e[n]?e.setAttribute(n,""):e.removeAttribute(n))}var specialElHandlers={OPTION:function(e,t){var n=e.parentNode;if(n){var o=n.nodeName.toUpperCase();"OPTGROUP"===o&&(o=(n=n.parentNode)&&n.nodeName.toUpperCase()),"SELECT"!==o||n.hasAttribute("multiple")||(e.hasAttribute("selected")&&!t.selected&&(e.setAttribute("selected","selected"),e.removeAttribute("selected")),n.selectedIndex=-1)}syncBooleanAttrProp(e,t,"selected")},INPUT:function(e,t){syncBooleanAttrProp(e,t,"checked"),syncBooleanAttrProp(e,t,"disabled"),e.value!==t.value&&(e.value=t.value),t.hasAttribute("value")||e.removeAttribute("value")},TEXTAREA:function(e,t){var n=t.value;e.value!==n&&(e.value=n);var o=e.firstChild;if(o){var r=o.nodeValue;if(r==n||!n&&r==e.placeholder)return;o.nodeValue=n}},SELECT:function(e,t){if(!t.hasAttribute("multiple")){for(var n,o,r=-1,a=0,i=e.firstChild;i;)if("OPTGROUP"===(o=i.nodeName&&i.nodeName.toUpperCase()))i=(n=i).firstChild;else{if("OPTION"===o){if(i.hasAttribute("selected")){r=a;break}a++}(i=i.nextSibling)||!n||(i=n.nextSibling,n=null)}e.selectedIndex=r}}},ELEMENT_NODE=1,DOCUMENT_FRAGMENT_NODE$1=11,TEXT_NODE=3,COMMENT_NODE=8;function noop(){}function defaultGetNodeKey(e){if(e)return e.getAttribute&&e.getAttribute("id")||e.id}function morphdomFactory(e){return function t(n,o,r){if(r||(r={}),"string"==typeof o){if("#document"===n.nodeName||"HTML"===n.nodeName||"BODY"===n.nodeName){var a=o;(o=doc.createElement("html")).innerHTML=a}else o=toElement(o)}else o.nodeType===DOCUMENT_FRAGMENT_NODE$1&&(o=o.firstElementChild);var i=r.getNodeKey||defaultGetNodeKey,l=r.onBeforeNodeAdded||noop,c=r.onNodeAdded||noop,s=r.onBeforeElUpdated||noop,d=r.onElUpdated||noop,u=r.onBeforeNodeDiscarded||noop,m=r.onNodeDiscarded||noop,p=r.onBeforeElChildrenUpdated||noop,f=r.skipFromChildren||noop,N=r.addChild||function(e,t){return e.appendChild(t)},E=!0===r.childrenOnly,h=Object.create(null),v=[];function T(e){v.push(e)}function A(e,t,n){!1!==u(e)&&(t&&t.removeChild(e),m(e),function e(t,n){if(t.nodeType===ELEMENT_NODE)for(var o=t.firstChild;o;){var r=void 0;n&&(r=i(o))?T(r):(m(o),o.firstChild&&e(o,n)),o=o.nextSibling}}(e,n))}function g(e){c(e);for(var t=e.firstChild;t;){var n=t.nextSibling,o=i(t);if(o){var r=h[o];r&&compareNodeNames(t,r)?(t.parentNode.replaceChild(r,t),C(r,t)):g(t)}else g(t);t=n}}function C(t,n,o){var r=i(n);if(r&&delete h[r],o||!1!==s(t,n)&&(e(t,n),d(t),!1!==p(t,n)))"TEXTAREA"!==t.nodeName?function e(t,n){var o,r,a,c,s,d=f(t,n),u=n.firstChild,m=t.firstChild;outer:for(;u;){for(c=u.nextSibling,o=i(u);!d&&m;){if(a=m.nextSibling,u.isSameNode&&u.isSameNode(m)){u=c,m=a;continue outer}r=i(m);var p=m.nodeType,E=void 0;if(p===u.nodeType&&(p===ELEMENT_NODE?(o?o!==r&&((s=h[o])?a===s?E=!1:(t.insertBefore(s,m),r?T(r):A(m,t,!0),r=i(m=s)):E=!1):r&&(E=!1),(E=!1!==E&&compareNodeNames(m,u))&&C(m,u)):(p===TEXT_NODE||p==COMMENT_NODE)&&(E=!0,m.nodeValue!==u.nodeValue&&(m.nodeValue=u.nodeValue))),E){u=c,m=a;continue outer}r?T(r):A(m,t,!0),m=a}if(o&&(s=h[o])&&compareNodeNames(s,u))d||N(t,s),C(s,u);else{var v=l(u);!1!==v&&(v&&(u=v),u.actualize&&(u=u.actualize(t.ownerDocument||doc)),N(t,u),g(u))}u=c,m=a}!function e(t,n,o){for(;n;){var r=n.nextSibling;(o=i(n))?T(o):A(n,t,!0),n=r}}(t,m,r);var O=specialElHandlers[t.nodeName];O&&O(t,n)}(t,n):specialElHandlers.TEXTAREA(t,n)}!function e(t){if(t.nodeType===ELEMENT_NODE||t.nodeType===DOCUMENT_FRAGMENT_NODE$1)for(var n=t.firstChild;n;){var o=i(n);o&&(h[o]=n),e(n),n=n.nextSibling}}(n);var O=n,y=O.nodeType,b=o.nodeType;if(!E){if(y===ELEMENT_NODE)b===ELEMENT_NODE?compareNodeNames(n,o)||(m(n),O=moveChildren(n,createElementNS(o.nodeName,o.namespaceURI))):O=o;else if(y===TEXT_NODE||y===COMMENT_NODE){if(b===y)return O.nodeValue!==o.nodeValue&&(O.nodeValue=o.nodeValue),O;O=o}}if(O===o)m(n);else{if(o.isSameNode&&o.isSameNode(O))return;if(C(O,o,E),v)for(var S=0,M=v.length;S<M;S++){var D=h[v[S]];D&&A(D,D.parentNode,!1)}}return!E&&O!==n&&n.parentNode&&(O.actualize&&(O=O.actualize(n.ownerDocument||doc)),n.parentNode.replaceChild(O,n)),O}}var morphdom=morphdomFactory(morphAttrs);export class Application{constructor(){this._eventNames=["click","dblclick","mousedown","mouseup","mousemove","mouseenter","mouseleave","mouseover","mouseout","keydown","keypress","keyup","focus","blur","input","change","submit","scroll","error","resize","select","touchstart","touchmove","touchend","touchcancel","animationstart","animationend","animationiteration","transitionstart","transitionend","transitioncancel"],this._components=[],this._morphdomOption={onBeforeElUpdated:function(e,t){return!e.isEqualNode(t)}}}static launch(e){let t=this._getInstance();for(let n of e)t._components.push({name:Application._getComponentName(n.name),ctor:n});t._updateElement(document.documentElement)}static update(e){null!==Application._instance&&Application._getInstance()._updateComponent(e)}static getComponent(e){var t;if(null===Application._instance)return null;let n=Application._getComponentName(e.name),o=document.querySelector(n);return o&&null!==(t=o.component)&&void 0!==t?t:null}static getComponents(e){if(null===Application._instance)return[];let t=Application._getComponentName(e.name),n=Array.from(document.querySelectorAll(t)),o=[];for(let r of n)r.component&&o.push(r.component);return o}static _getInstance(){var e;return null!==(e=Application._instance)&&void 0!==e?e:Application._instance=new Application}static _getComponentName(e){let t="";for(let n=0;n<e.length;n++)n>0&&e[n]===e[n].toUpperCase()&&(t+="-"),t+=e[n].toLowerCase();return t}_updateElement(e){let t=[];for(let n of this._components)for(let o of Array.from(e.querySelectorAll(n.name))){let r=o.attributes.getNamedItem("nova-loaded");if(r&&"true"===r.value)continue;o.setAttribute("nova-loaded","true"),o.style.display="inline-block",o.style.width="fit-content",o.style.height="fit-content";let a=new n.ctor(o);t.push(a),this._registerEventListeners(a),o.component=a,o.innerHTML=a.render()}for(let i of t)i.onStart()}_registerEventListeners(e){for(let t of e.getKeys()){let n=t.substring(2).toLowerCase();-1!==this._eventNames.indexOf(n)&&e.element.addEventListener(n,n=>{e[t](n)})}}_updateComponent(e){let t=e.element.cloneNode(!1);t.innerHTML=e.render(),morphdom(e.element,t,this._morphdomOption),this._updateElement(e.element)}}Application._instance=null;export class Component{constructor(e){this.element=e}input(e,t=null){let n=this.element.attributes.getNamedItem(e);return n?n.value:t}update(e){for(let t of this.getKeys())this[t]===e&&(this[t]=e)}getKeys(){let e=[],t=this;for(;t;){let n=Object.getPrototypeOf(t);n&&Object.getPrototypeOf(n)&&(e=e.concat(Object.getOwnPropertyNames(t))),t=n}return[...new Set(e)]}start(){}onClick(e){}onDblClick(e){}onMouseDown(e){}onMouseUp(e){}onMouseMove(e){}onMouseEnter(e){}onMouseLeave(e){}onMouseOver(e){}onMouseOut(e){}onKeyDown(e){}onKeyPress(e){}onKeyUp(e){}onFocus(e){}onBlur(e){}onInput(e){}onChange(e){}onSubmit(e){}onScroll(e){}onError(e){}onResize(e){}onSelect(e){}onTouchStart(e){}onTouchMove(e){}onTouchEnd(e){}onTouchCancel(e){}onAnimationStart(e){}onAnimationEnd(e){}onAnimationIteration(e){}onTransitionStart(e){}onTransitionEnd(e){}onTransitionCancel(e){}}export class LocalStorage{static getItem(e){let t=localStorage.getItem(e);if(!t)return null;let n=JSON.parse(t);return void 0!==n.expiry&&n.expiry<new Date().getTime()?(localStorage.removeItem(e),null):n.value}static setItem(e,t,n){let o={value:t,expiry:void 0!==n?new Date().getTime()+n:void 0};localStorage.setItem(e,JSON.stringify(o))}}export function State(e,t){let n=e[t],o=function(){return n},r=function(e){n=e,this instanceof Component&&Application.update(this)};Object.defineProperty(e,t,{get:o,set:r,enumerable:!0,configurable:!0})}